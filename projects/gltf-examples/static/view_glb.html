<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>My first three.js app</title>
    <style>
      body { margin: 0; }
    </style>
  </head>
  <body>
     <script type="module">
        import * as THREE from 'https://esm.sh/three@0.152.0';
        import { GLTFLoader } from 'https://esm.sh/three@0.152.0/examples/jsm/loaders/GLTFLoader.js';

        const width = window.innerWidth, height = window.innerHeight;

        // init
        const camera = new THREE.PerspectiveCamera( 70, width / height, 0.01, 10 );
        camera.position.z = 1;

        const scene = new THREE.Scene();

        // 平行光源
        const light = new THREE.DirectionalLight(0xFFFFFF);
        light.intensity = 2; // 光の強さを倍に
        light.position.set(1, 1, 1);
        // Add light to scene
        scene.add(light)

        const renderer = new THREE.WebGLRenderer( { antialias: true } );
        renderer.setSize( width, height );
        document.body.appendChild( renderer.domElement );

        let model;

        // animation
        function animate( time ) {
            model.rotation.x = time / 2000;
            model.rotation.y = time / 1000;
            renderer.render( scene, camera );
        }

        const loader = new GLTFLoader();
        loader.load(
          '/data/<!-- GLB_PLACEHOLDER -->',
          (gltf) => {
            console.log(gltf);
            scene.add(gltf.scene);
            model = gltf.scene;
            console.log("INFO: model load success.");
            // requestAnimationFrame(renderer);
            renderer.setAnimationLoop( animate );
          },
          undefined,
          (error) => {
            console.error('ERROR: load glTF/glB file failed. : ', error);
          }
        );
     </script>
  </body>
</html>